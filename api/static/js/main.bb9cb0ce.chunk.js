(this.webpackJsonpfmtrainer=this.webpackJsonpfmtrainer||[]).push([[0],{11:function(t,n,e){t.exports={button:"Train_button__2wHuI",footer:"Train_footer__WmYe4"}},23:function(t,n,e){t.exports=e(54)},28:function(t,n,e){},29:function(t,n,e){t.exports=e.p+"static/media/logo.8dad8028.svg"},4:function(t,n,e){t.exports={row:"Counter_row__1C_4f",value:"Counter_value__1d0te",button:"Counter_button__1xpSV",textbox:"Counter_textbox__3ODaX",asyncButton:"Counter_asyncButton__2UAr3 Counter_button__1xpSV"}},53:function(t,n,e){},54:function(t,n,e){"use strict";e.r(n);var r=e(0),o=e.n(r),i=e(7),a=e.n(i),s=(e(28),e(29),e(22),e(2)),c=e(5),u=Object(c.b)({name:"counter",initialState:{value:0},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,n){t.value+=n.payload}}}),d=u.actions,l=(d.increment,d.decrement,d.incrementByAmount,u.reducer);e(4);var g=e(6),m=e.n(g),I=function(t){m()({method:"get",url:encodeURIComponent("/record/".concat(t))})},N={NOT_LISTENING:"not listening",AWAITING_GESTURE:"awaiting gesture",AWAITING_CONFIRMATION:"awaiting confirmation",FIVE:"5",FOUR:"4",THREE:"3",TWO:"2",ONE:"1",RECORDING:"recording"},T=["FIVE","FOUR","THREE","TWO","ONE","RECORDING"],f={NOT_LISTENING:"press button to start listening for instructions",AWAITING_GESTURE:"say <strong>train</strong> followed by the <strong><i>name of the gesture</i></strong> you'd like to train",AWAITING_CONFIRMATION:"say <strong>ready</strong> to start recording a gesture with this name or <strong>cancel</strong> to restate gesture",FIVE:"recording in <strong>five</strong> seconds...",FOUR:"recording in <strong>four</strong> seconds...",THREE:"recording in <strong>three</strong> seconds...",TWO:"recording in <strong>two</strong> seconds...",ONE:"recording in <strong>one</strong> second!",RECORDING:"record gesture, say <strong>ok</strong> or <strong>done</strong> when done, or <strong>cancel</strong> to discard"},E=Object(c.b)({name:"train",initialState:{amListening:!1,status:N.NOT_LISTENING,instructions:f.NOT_LISTENING,gesture:"",rawTranscript:""},reducers:{setStatus:function(t,n){t.status=N[n.payload],t.instructions=f[n.payload]},setRawTranscript:function(t,n){t.rawTranscript=n.payload},reset:function(t,n){t.status=N.AWAITING_GESTURE,t.instructions=f.AWAITING_GESTURE,t.gesture=""},startedListening:function(t,n){n.payload?(t.amFinished=!1,t.amListening=!0,t.status=N.AWAITING_GESTURE,t.instructions=f.AWAITING_GESTURE):(t.status=N.NOT_LISTENING,t.instructions=f.NOT_LISTENING)},issueConfirm:function(t,n){t.readytorecord="yes"===n.payload.toLowerCase()},setGesture:function(t,n){if(""!==n.payload.trim()){var e=n.payload.toLowerCase().indexOf("train");-1!==e&&(t.gesture="".concat(n.payload.substring(e+5).trim()),t.status=N.AWAITING_CONFIRMATION,t.instructions=f.AWAITING_CONFIRMATION)}}}}),p=E.actions,_=p.setGesture,O=p.setStatus,w=p.startedListening,A=(p.amListening,p.reset),R=p.setRawTranscript,h=function(t){return t.train.gesture},v=function(t){return t.train.status},G=function(t){return t.train.instructions},S=function(t){return t.train.amListening},y=function(t){return t.train.rawTranscript},b=function(t){return function(n,e){var r=e().train;return n(R(t.toLowerCase().trim())),-1!==["done","ok"].indexOf(t.toLowerCase().trim())?(n(A()),void m()({method:"get",url:"/done"})):"cancel"!==t.toLowerCase().trim()?r.status===N.AWAITING_CONFIRMATION&&"ready"===t.toLowerCase().trim()?(n(O("RECORDING_COUNTDOWN")),void n(C(r))):void n(_(t)):void n(A())}},C=function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r){r(O(T[e])),5==e&&(console.log("calling record with ",n),I(n.gesture)),e<5&&setTimeout((function(){return t(n,++e)(r)}),1e3)}},L=E.reducer,x=e(11),W=e.n(x);function F(){var t="undefined"!==typeof window&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),n=t?new t:null;n.continous=!0,n.interimResults=!0,n.lang="en-US";var e=Object(s.c)(h),r=Object(s.c)(G),i=Object(s.c)(S),a=Object(s.c)(y),c="recording"===Object(s.c)(v),u=Object(s.b)(),d="",l="";n.onend=function(){d="",n.start()},n.onresult=function(t){l="";for(var n=t.resultIndex;n<t.results.length;n++){var e=t.results[n][0].transcript;t.results[n].isFinal?d+=e+" ":u(b(l+=e))}u(b(d))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{padding:"0px 100px 100px 100px"}},c&&o.a.createElement("img",{height:"600px",src:"/video_feed"}),o.a.createElement("div",{style:{fontSize:80,fontWeight:700,textTransform:"uppercase",marginBottom:30}},e),i&&o.a.createElement("div",{style:{color:"#736A6A"},dangerouslySetInnerHTML:{__html:r}}),!i&&o.a.createElement("button",{id:"microphone-btn",className:W.a.button,onClick:function(){d="",console.log("in handle listener: am listening",i),i||(u(w(!0)),console.log("OK STARTING LISTENING!"),n.start())}},"START LISTENING")),""!=a.trim()&&o.a.createElement("div",{className:W.a.footer},'"'.concat(a,'"')))}e(53);var U=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(F,null)))},j=Object(c.a)({reducer:{counter:l,train:L}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,{store:j},o.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.bb9cb0ce.chunk.js.map