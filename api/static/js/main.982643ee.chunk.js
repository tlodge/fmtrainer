(this.webpackJsonpfmtrainer=this.webpackJsonpfmtrainer||[]).push([[0],{11:function(t,e,n){t.exports={button:"Train_button__2wHuI",footer:"Train_footer__WmYe4"}},23:function(t,e,n){t.exports=n(54)},28:function(t,e,n){},29:function(t,e,n){t.exports=n.p+"static/media/logo.8dad8028.svg"},4:function(t,e,n){t.exports={row:"Counter_row__1C_4f",value:"Counter_value__1d0te",button:"Counter_button__1xpSV",textbox:"Counter_textbox__3ODaX",asyncButton:"Counter_asyncButton__2UAr3 Counter_button__1xpSV"}},53:function(t,e,n){},54:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(7),a=n.n(i),s=(n(28),n(29),n(22),n(2)),c=n(5),u=Object(c.b)({name:"counter",initialState:{value:0},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload}}}),d=u.actions,l=(d.increment,d.decrement,d.incrementByAmount,u.reducer);n(4);var g=n(6),m=n.n(g),I=function(t){m()({method:"get",url:encodeURIComponent("/record/".concat(t))})},N={NOT_LISTENING:"not listening",AWAITING_GESTURE:"awaiting gesture",AWAITING_CONFIRMATION:"awaiting confirmation",FIVE:"5",FOUR:"4",THREE:"3",TWO:"2",ONE:"1",RECORDING:"recording",TRAINING:"training"},T=["FIVE","FOUR","THREE","TWO","ONE","RECORDING"],f={NOT_LISTENING:"press button to start listening for instructions",AWAITING_GESTURE:"say <strong>record</strong> followed by the <strong><i>name of the gesture</i></strong> you'd like to train",AWAITING_CONFIRMATION:"say <strong>ready</strong> to start recording a gesture with this name or <strong>cancel</strong> to restate gesture",FIVE:"recording in <strong>five</strong> seconds...",FOUR:"recording in <strong>four</strong> seconds...",THREE:"recording in <strong>three</strong> seconds...",TWO:"recording in <strong>two</strong> seconds...",ONE:"recording in <strong>one</strong> second!",RECORDING:"record gesture, say <strong>ok</strong> or <strong>done</strong> when done, or <strong>cancel</strong> to discard",TRAINING:"now training...this will take a while..."},E=Object(c.b)({name:"train",initialState:{amListening:!1,status:N.NOT_LISTENING,instructions:f.NOT_LISTENING,gesture:"",rawTranscript:""},reducers:{setStatus:function(t,e){t.status=N[e.payload],t.instructions=f[e.payload]},setRawTranscript:function(t,e){t.rawTranscript=e.payload},reset:function(t,e){t.status=N.AWAITING_GESTURE,t.instructions=f.AWAITING_GESTURE,t.gesture=""},startedListening:function(t,e){e.payload?(t.amFinished=!1,t.amListening=!0,t.status=N.AWAITING_GESTURE,t.instructions=f.AWAITING_GESTURE):(t.status=N.NOT_LISTENING,t.instructions=f.NOT_LISTENING)},issueConfirm:function(t,e){t.readytorecord="yes"===e.payload.toLowerCase()},setGesture:function(t,e){if(""!==e.payload.trim()){var n=e.payload.toLowerCase().indexOf("record");-1!==n&&(t.gesture="".concat(e.payload.substring(n+6).trim()),t.status=N.AWAITING_CONFIRMATION,t.instructions=f.AWAITING_CONFIRMATION)}}}}),p=E.actions,w=p.setGesture,_=p.setStatus,O=p.startedListening,A=(p.amListening,p.reset),R=p.setRawTranscript,h=function(t){return t.train.gesture},G=function(t){return t.train.status},v=function(t){return t.train.instructions},S=function(t){return t.train.amListening},y=function(t){return t.train.rawTranscript},b=function(t){return function(e,n){var r=n().train;return e(R(t.toLowerCase().trim())),"train"===t.toLowerCase().trim()?(e(A()),e(_("TRAINING")),void m()({method:"get",url:"/train"})):-1!==["done","ok"].indexOf(t.toLowerCase().trim())?(e(A()),void m()({method:"get",url:"/done"})):"cancel"!==t.toLowerCase().trim()?r.status===N.AWAITING_CONFIRMATION&&"ready"===t.toLowerCase().trim()?(e(_("RECORDING_COUNTDOWN")),void e(C(r))):void e(w(t)):void e(A())}},C=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r){r(_(T[n])),5==n&&(console.log("calling record with ",e),I(e.gesture)),n<5&&setTimeout((function(){return t(e,++n)(r)}),1e3)}},L=E.reducer,x=n(11),W=n.n(x);function F(){var t="undefined"!==typeof window&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),e=t?new t:null;e.continous=!0,e.interimResults=!0,e.lang="en-US";var n=Object(s.c)(h),r=Object(s.c)(v),i=Object(s.c)(S),a=Object(s.c)(y),c="recording"===Object(s.c)(G),u=Object(s.b)(),d="",l="";e.onend=function(){d="",e.start()},e.onresult=function(t){l="";for(var e=t.resultIndex;e<t.results.length;e++){var n=t.results[e][0].transcript;t.results[e].isFinal?d+=n+" ":u(b(l+=n))}u(b(d))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{padding:"0px 100px 100px 100px"}},c&&o.a.createElement("img",{height:"600px",src:"/video_feed"}),o.a.createElement("div",{style:{fontSize:80,fontWeight:700,textTransform:"uppercase",marginBottom:30}},n),i&&o.a.createElement("div",{style:{color:"#736A6A"},dangerouslySetInnerHTML:{__html:r}}),!i&&o.a.createElement("button",{id:"microphone-btn",className:W.a.button,onClick:function(){d="",console.log("in handle listener: am listening",i),i||(u(O(!0)),console.log("OK STARTING LISTENING!"),e.start())}},"START LISTENING")),""!=a.trim()&&o.a.createElement("div",{className:W.a.footer},'"'.concat(a,'"')))}n(53);var U=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(F,null)))},k=Object(c.a)({reducer:{counter:l,train:L}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,{store:k},o.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.982643ee.chunk.js.map